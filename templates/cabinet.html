<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <header>
        <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
        <h2 id="admin-view-title" style="display:none; margin-top: 8px; color: var(--color-warning); font-size: 1.2rem;">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω)</h2>
        <p style="color: var(--color-text-secondary);">–ó–¥–µ—Å—å –≤—ã –≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç—É—Å —Ñ–æ—Ç–æ, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã.</p>
    </header>

    <div class="form-card" style="max-width: 900px;">
        <form id="email-form" {% if user_email %}style="display:none;"{% endif %}>
            <div class="form-group">
                <label for="cabinet-email-input">Email</label>
                <input id="cabinet-email-input" type="email" required placeholder="your@email.com">
            </div>
            <button class="btn" type="submit">–û—Ç–∫—Ä—ã—Ç—å –∫–∞–±–∏–Ω–µ—Ç</button>
        </form>

        <div id="cabinet-content" {% if not user_email %}style="display:none;"{% endif %}>
            <div class="cabinet-topbar">
                <button id="profile-toggle-btn" type="button" class="cabinet-action-btn">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                {% if admin_view %}
                <a href="{{ url_for('admin_page') }}" class="cabinet-action-btn" style="text-decoration:none; display:inline-flex; align-items:center;">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∞–¥–º–∏–Ω–∫—É</a>
                {% else %}
                <button id="logout-btn" type="button" class="cabinet-logout-btn">–í—ã–π—Ç–∏</button>
                {% endif %}
            </div>
            <div id="profile-panel" class="cabinet-profile-panel" style="display: none;">
                <h3 style="margin-bottom: 16px; color: var(--color-primary); font-size: 1.4rem;">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <form id="profile-form">
                    <div class="form-group">
                        <label for="profile-email">Email</label>
                        <input id="profile-email" type="email" readonly>
                    </div>
                    <div class="form-group">
                        <label for="profile-name">–ò–º—è *</label>
                        <input id="profile-name" type="text" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-district">–†–∞–π–æ–Ω *</label>
                        <select id="profile-district" required style="width: 100%; padding: 12px; background: var(--color-bg-base); color: var(--color-text-primary); border: 2px solid var(--color-border); border-radius: 8px; font-size: 16px;">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω</option>
                            <option value="–ê–≥—Ä—ã–∑—Å–∫–∏–π">–ê–≥—Ä—ã–∑—Å–∫–∏–π</option>
                            <option value="–ê–∑–Ω–∞–∫–∞–µ–≤—Å–∫–∏–π">–ê–∑–Ω–∞–∫–∞–µ–≤—Å–∫–∏–π</option>
                            <option value="–ê–∫—Å—É–±–∞–µ–≤—Å–∫–∏–π">–ê–∫—Å—É–±–∞–µ–≤—Å–∫–∏–π</option>
                            <option value="–ê–∫—Ç–∞–Ω—ã—à—Å–∫–∏–π">–ê–∫—Ç–∞–Ω—ã—à—Å–∫–∏–π</option>
                            <option value="–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π">–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π</option>
                            <option value="–ê–ª—å–∫–µ–µ–≤—Å–∫–∏–π">–ê–ª—å–∫–µ–µ–≤—Å–∫–∏–π</option>
                            <option value="–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–∏–π">–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–∏–π</option>
                            <option value="–ê–ø–∞—Å—Ç–æ–≤—Å–∫–∏–π">–ê–ø–∞—Å—Ç–æ–≤—Å–∫–∏–π</option>
                            <option value="–ê—Ä—Å–∫–∏–π">–ê—Ä—Å–∫–∏–π</option>
                            <option value="–ê—Ç–Ω–∏–Ω—Å–∫–∏–π">–ê—Ç–Ω–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ë–∞–≤–ª–∏–Ω—Å–∫–∏–π">–ë–∞–≤–ª–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ë–∞–ª—Ç–∞—Å–∏–Ω—Å–∫–∏–π">–ë–∞–ª—Ç–∞—Å–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ë—É–≥—É–ª—å–º–∏–Ω—Å–∫–∏–π">–ë—É–≥—É–ª—å–º–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ë—É–∏–Ω—Å–∫–∏–π">–ë—É–∏–Ω—Å–∫–∏–π</option>
                            <option value="–í–µ—Ä—Ö–Ω–µ—É—Å–ª–æ–Ω—Å–∫–∏–π">–í–µ—Ä—Ö–Ω–µ—É—Å–ª–æ–Ω—Å–∫–∏–π</option>
                            <option value="–í—ã—Å–æ–∫–æ–≥–æ—Ä—Å–∫–∏–π">–í—ã—Å–æ–∫–æ–≥–æ—Ä—Å–∫–∏–π</option>
                            <option value="–î—Ä–æ–∂–∂–∞–Ω–æ–≤—Å–∫–∏–π">–î—Ä–æ–∂–∂–∞–Ω–æ–≤—Å–∫–∏–π</option>
                            <option value="–ï–ª–∞–±—É–∂—Å–∫–∏–π">–ï–ª–∞–±—É–∂—Å–∫–∏–π</option>
                            <option value="–ó–∞–∏–Ω—Å–∫–∏–π">–ó–∞–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ó–µ–ª–µ–Ω–æ–¥–æ–ª—å—Å–∫–∏–π">–ó–µ–ª–µ–Ω–æ–¥–æ–ª—å—Å–∫–∏–π</option>
                            <option value="–ö–∞–π–±–∏—Ü–∫–∏–π">–ö–∞–π–±–∏—Ü–∫–∏–π</option>
                            <option value="–ö–∞–º—Å–∫–æ-–£—Å—Ç—å–∏–Ω—Å–∫–∏–π">–ö–∞–º—Å–∫–æ-–£—Å—Ç—å–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ö—É–∫–º–æ—Ä—Å–∫–∏–π">–ö—É–∫–º–æ—Ä—Å–∫–∏–π</option>
                            <option value="–õ–∞–∏—à–µ–≤—Å–∫–∏–π">–õ–∞–∏—à–µ–≤—Å–∫–∏–π</option>
                            <option value="–õ–µ–Ω–∏–Ω–æ–≥–æ—Ä—Å–∫–∏–π">–õ–µ–Ω–∏–Ω–æ–≥–æ—Ä—Å–∫–∏–π</option>
                            <option value="–ú–∞–º–∞–¥—ã—à—Å–∫–∏–π">–ú–∞–º–∞–¥—ã—à—Å–∫–∏–π</option>
                            <option value="–ú–µ–Ω–¥–µ–ª–µ–µ–≤—Å–∫–∏–π">–ú–µ–Ω–¥–µ–ª–µ–µ–≤—Å–∫–∏–π</option>
                            <option value="–ú–µ–Ω–∑–µ–ª–∏–Ω—Å–∫–∏–π">–ú–µ–Ω–∑–µ–ª–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ú—É—Å–ª—é–º–æ–≤—Å–∫–∏–π">–ú—É—Å–ª—é–º–æ–≤—Å–∫–∏–π</option>
                            <option value="–ù–∏–∂–Ω–µ–∫–∞–º—Å–∫–∏–π">–ù–∏–∂–Ω–µ–∫–∞–º—Å–∫–∏–π</option>
                            <option value="–ù–æ–≤–æ—à–µ—à–º–∏–Ω—Å–∫–∏–π">–ù–æ–≤–æ—à–µ—à–º–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ù—É—Ä–ª–∞—Ç—Å–∫–∏–π">–ù—É—Ä–ª–∞—Ç—Å–∫–∏–π</option>
                            <option value="–ü–µ—Å—Ç—Ä–µ—á–∏–Ω—Å–∫–∏–π">–ü–µ—Å—Ç—Ä–µ—á–∏–Ω—Å–∫–∏–π</option>
                            <option value="–†—ã–±–Ω–æ-–°–ª–æ–±–æ–¥—Å–∫–∏–π">–†—ã–±–Ω–æ-–°–ª–æ–±–æ–¥—Å–∫–∏–π</option>
                            <option value="–°–∞–±–∏–Ω—Å–∫–∏–π">–°–∞–±–∏–Ω—Å–∫–∏–π</option>
                            <option value="–°–∞—Ä–º–∞–Ω–æ–≤—Å–∫–∏–π">–°–∞—Ä–º–∞–Ω–æ–≤—Å–∫–∏–π</option>
                            <option value="–°–ø–∞—Å—Å–∫–∏–π">–°–ø–∞—Å—Å–∫–∏–π</option>
                            <option value="–¢–µ—Ç—é—à—Å–∫–∏–π">–¢–µ—Ç—é—à—Å–∫–∏–π</option>
                            <option value="–¢—É–∫–∞–µ–≤—Å–∫–∏–π">–¢—É–∫–∞–µ–≤—Å–∫–∏–π</option>
                            <option value="–¢—é–ª—è—á–∏–Ω—Å–∫–∏–π">–¢—é–ª—è—á–∏–Ω—Å–∫–∏–π</option>
                            <option value="–ß–µ—Ä–µ–º—à–∞–Ω—Å–∫–∏–π">–ß–µ—Ä–µ–º—à–∞–Ω—Å–∫–∏–π</option>
                            <option value="–ß–∏—Å—Ç–æ–ø–æ–ª—å—Å–∫–∏–π">–ß–∏—Å—Ç–æ–ø–æ–ª—å—Å–∫–∏–π</option>
                            <option value="–Æ—Ç–∞–∑–∏–Ω—Å–∫–∏–π">–Æ—Ç–∞–∑–∏–Ω—Å–∫–∏–π</option>
                            <option value="–≥. –ö–∞–∑–∞–Ω—å">–≥. –ö–∞–∑–∞–Ω—å</option>
                            <option value="–≥. –ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã">–≥. –ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="profile-phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input id="profile-phone" type="text">
                    </div>
                    <div class="form-group">
                        <label for="profile-comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                        <textarea id="profile-comment"></textarea>
                    </div>
                    <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </form>
            </div>

            <h2 id="photos-title" style="margin: 24px 0 16px; color: var(--color-primary);">–ú–æ–∏ —Ñ–æ—Ç–æ</h2>
            <div id="photos-list" class="submissions-grid"></div>

            <div id="upload-section">
            <h2 style="margin: 24px 0 16px; color: var(--color-primary);">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ</h2>
            <form id="upload-form">
                <div class="form-group">
                    <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ *</label>
                    <div class="file-upload" id="cabinet-file-upload">
                        <input type="file" id="cabinet-photo-input" accept="image/*" required multiple>
                        <p style="color: var(--color-text-muted);">
                            üìÅ –ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)<br>
                            <small>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –º–∏–Ω. 2000px –ø–æ —à–∏—Ä–∏–Ω–µ, –º–∏–Ω. 250 –ö–ë<br>JPG, PNG, WEBP</small>
                        </p>
                    </div>
                    <div class="file-preview" id="cabinet-file-preview"></div>
                </div>
                <button id="cabinet-upload-submit-btn" type="submit" class="btn" style="display:none;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
                <div id="cabinet-upload-status" class="upload-status" style="display:none;">–ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä...</div>
            </form>
            </div>
        </div>
    </div>
</div>

<div id="photo-modal" class="photo-modal">
    <button class="photo-modal-close" id="photo-modal-close">‚úï</button>
    <div class="photo-modal-toolbar">
        <button id="zoom-out-btn">‚àí</button>
        <button id="zoom-reset-btn">100%</button>
        <button id="zoom-in-btn">+</button>
    </div>
    <div class="photo-modal-stage">
        <img id="photo-modal-image" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ">
    </div>
</div>

<script>
    window.CABINET_CONTEXT = {
        userEmail: {{ user_email|tojson }},
        adminView: {{ admin_view|tojson }}
    };
</script>
<script src="{{ url_for('static', filename='cabinet.js') }}"></script>
</body>
</html>
